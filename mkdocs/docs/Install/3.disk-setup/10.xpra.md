# Xpra

xpra is an alternative to RDP
It has super fast almost native performance compared to rdp when I tested it against xfce
Also you can connect from the client just using a web browser (or the proper client software)

  * https://xpra.org/index.html - also contains windows version
  * https://github.com/Xpra-org/xpra
  * https://github.com/Xpra-org/xpra-html5

  * https://www.youtube.com/watch?v=2iBMsyfbC28
  * https://github.com/Xpra-org/xpra/blob/master/docs/Usage/Shadow.md
  * https://wiki.archlinux.org/title/Xpra
  * https://blog.ouseful.info/2019/03/11/running-microsoft-vs-code-remotely-xpra-and-rdp/
  * https://github.com/Xpra-org/xpra/blob/master/docs/Usage/Desktop.md

Currently I've got the latest version of xpra setup via an overlay

acct-group/xpra-0-r2-1



## Installing

```bash
# Todo add as a depend
emerge dev-python/paramiko
emerge =x11-wm/xpra-6.2.3
emerge =www-apps/xpra-html5-17
```


## Running

```bash
# Seems to partially work creates a new session
xpra start :100 --start="xfce4-session" --bind-tcp=0.0.0.0:10000

xpra start :100 --start="konsole" --bind-tcp=0.0.0.0:10000
# nearly works
# desktop doesnt resize?
xpra start-desktop :100 --resize-display="1920x1080" --start="startplasma-wayland" --bind-tcp=0.0.0.0:10000

# List active sessions
xpra list

# TODO
# this might work
xpra shadow wayland-0 --bind-tcp=0.0.0.0:10000
```

Running this while plasma is started up nearly works.
```bash
xpra shadow wayland-0 --bind-tcp=0.0.0.0:10000
```

But once you connect via the client to port 10000 via a web browser a prompt shows up on the kde desktop
asking if you want to confirm that remote access is allowed
So I think I need another form of command similar to this but to allow xpra instead
not quite sure what to replace `org.kde.krdpserver` with though
```bash
flatpak permission-set kde-authorized remote-desktop org.kde.krdpserver yes
```

  * https://develop.kde.org/docs/administration/portal-permissions/
  * http://192.168.111.74:10000/index.html
  * http://192.168.111.56:10000/index.html

## TODO

### Working

konsole seems to work
```bash
xpra start :100 --start="konsole" --bind-tcp=0.0.0.0:10000
```
doesnt seem to list any active sessions
true if works or if the session crashes
```
xpra list 
```

The only way to get rid is via killing the process id
```bash
ps -A | grep xpra
```

### Xorg

Currently there's only an option for installing / using under xorg

### xpra html5

xpra-html5 is placing its files under `/usr/share/xpra/www/`
need to configure xpra to find them
